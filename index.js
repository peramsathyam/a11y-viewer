!function(){function onPageLoad(){var queryString=window.location.search;if(queryString){var state=queryStringToObject(window.location.search);restoreForm(state)}else window.history.replaceState("","",formToQueryString())}function toggleMenu(){collapsibleTarget.classList.toggle("is-open")}function restoreForm(state){formElements.forEach(function(element){var newValue=state[element.id];"checkbox"==element.type&&element.checked.toString()!=newValue?(element.checked="true"==newValue,update(element,!1)):element.value!=newValue&&(element.value=newValue,update(element,!1))})}function update(formElement,isTriggeredByUser){var value;switch(formElement){case visionSelect:value=formElement.value,simulateVisualImpairment(value);break;case colorSelect:value=formElement.value,simulateColorBlindness(value);break;case keyboardOnlyInput:value=formElement.checked,toggleClickStealer(value);break;case urlInput:value=formElement.value,updateTestSite(value)}supportsPushState&&isTriggeredByUser&&updateHistory(formElement.id,value)}function simulateVisualImpairment(value){visionSelectOptions.forEach(function(option){main.classList.remove(option.value)}),main.classList.add(value)}function simulateColorBlindness(value){colorSelectOptions.forEach(function(option){main.classList.remove(option.value)}),main.classList.add(value)}function toggleClickStealer(isActive){main.classList.toggle(DISABLED_CLASS,isActive)}function updateTestSite(value){var parsedUrl=parseTestSiteUrl(value),parent=iframe.parentNode,newIframe=document.createElement("iframe");newIframe.src=parsedUrl,parent.replaceChild(newIframe,iframe),iframe=newIframe}function updateHistory(key,value){var queryString=replaceQueryString(key,value);window.history.pushState("","",queryString)}function replaceQueryString(key,value){var queryString=window.location.search.split("?").pop(),pairs=queryString.split("&").map(function(pair){var parts=pair.split("=");return parts[0]===key?parts[0]+"="+encodeURIComponent(value):pair});return"?"+pairs.join("&")}function formToQueryString(){return"?"+visionSelect.id+"="+visionSelect.value+"&"+colorSelect.id+"="+colorSelect.value+"&"+keyboardOnlyInput.id+"="+keyboardOnlyInput.checked+"&"+urlInput.id+"="+encodeURIComponent(urlInput.value)}function queryStringToObject(query){return query.split("?").pop().split("&").reduce(function(obj,token){var parts=token.split("=");return obj[parts[0]]=decodeURIComponent(parts[1]),obj},{})}function parseTestSiteUrl(url){return/^https?\:\/\//.test(url)||(url="//"+url),url}function arrayFrom(arrayLikeObject){for(var array=[],i=0;i<arrayLikeObject.length;i++)array.push(arrayLikeObject[i]);return array}var VISION_SELECTOR="[data-input-vision]",COLOR_SELECTOR="[data-input-color]",KEYBOARD_ONLY_SELECTOR="[data-input-keyboard-only]",URL_SELECTOR="[data-input-url]",DISABLED_CLASS="is-disabled",visionSelect=document.querySelector(VISION_SELECTOR),visionSelectOptions=arrayFrom(visionSelect.options),colorSelect=document.querySelector(COLOR_SELECTOR),colorSelectOptions=arrayFrom(colorSelect.options),keyboardOnlyInput=document.querySelector(KEYBOARD_ONLY_SELECTOR),urlInput=document.querySelector(URL_SELECTOR),formElements=[visionSelect,colorSelect,keyboardOnlyInput,urlInput],supportsPushState="pushState"in window.history,form=document.querySelector("form"),main=document.querySelector("main"),iframe=document.querySelector("iframe"),collapsibleHandlers=arrayFrom(document.querySelectorAll("[data-collapsible-handle]")),collapsibleTarget=document.querySelector("[data-collapsible-target]");onPageLoad(),form.addEventListener("change",function(event){update(event.target,!0)},!1),form.addEventListener("submit",function(event){event.preventDefault()},!1),window.onpopstate=function(){var state=queryStringToObject(window.location.search);restoreForm(state)},collapsibleHandlers.forEach(function(collapsible){collapsible.addEventListener("click",toggleMenu,!1)})}();